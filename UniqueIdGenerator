<mxfile modified="2024-06-10T18:09:12.171Z" host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36" etag="Dg0AeYgLD1YH2kqBEDoG" version="24.5.2" type="github">
  <diagram id="Ht1M8jgEwFfnCIfOTk4-" name="Page-1">
    <mxGraphModel dx="1434" dy="761" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-1" value="Functional requirements&lt;div&gt;- unique id in a distributed systems&lt;/div&gt;&lt;div&gt;- does the length of the generated id be constant ?&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; - what should be the length of the id (it should fit in 64 bit)&lt;/div&gt;&lt;div&gt;- is the generic id sortable&amp;nbsp; ?&amp;nbsp;&lt;/div&gt;&lt;div&gt;- increment by 1 , primary key in some kind of relational database&amp;nbsp;&lt;/div&gt;&lt;div&gt;- id generated should be unique globally&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Non functional requirements:&lt;/div&gt;&lt;div&gt;- Low latency&lt;/div&gt;&lt;div&gt;- High Availability&lt;/div&gt;&lt;div&gt;- PT&amp;nbsp;&lt;/div&gt;&lt;div&gt;-&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;spacingTop=-5;whiteSpace=wrap;html=1;align=left;fontSize=12;fontFamily=Helvetica;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="540" height="200" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-4" value="" style="swimlane;startSize=0;" vertex="1" parent="1">
          <mxGeometry x="420" y="290" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-6" value="ID Generator component" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry x="30" y="10" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-27" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry x="30" y="55" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-30" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry x="151" y="50" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-29" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry x="86" y="50" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-28" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry x="30" y="124" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-31" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry x="86" y="124" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-8" value="Generated unique ids" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="880" y="290" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-9" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="20" y="340" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-10" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ojcmlVFGGLW4lHHyD_7X-9" target="ojcmlVFGGLW4lHHyD_7X-19">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="420" as="sourcePoint" />
            <mxPoint x="200" y="370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-11" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.005;entryY=0.435;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ojcmlVFGGLW4lHHyD_7X-19" target="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="311.98" y="378" as="sourcePoint" />
            <mxPoint x="750" y="370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-12" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=52.5;entryPerimeter=0;" edge="1" parent="1" source="ojcmlVFGGLW4lHHyD_7X-4" target="ojcmlVFGGLW4lHHyD_7X-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="420" as="sourcePoint" />
            <mxPoint x="750" y="370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-16" value="&lt;div&gt;UUID = 128 bit number , IDs may not be numberic and don&#39;t have a dependence on time&lt;/div&gt;&lt;div&gt;twitter snow flake approach&lt;/div&gt;&lt;div&gt;&amp;nbsp;- 64&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- n bits for time 41 bits =&amp;gt; 2 ^41 ~ 80 years&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- 1 bit for signed and unsigned numbers&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;24 bits&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;- n bits for data center (5) =&amp;gt; 32 datacenters&lt;/div&gt;&lt;div&gt;&amp;nbsp; - n bits for machine id (ip ) within the datacenter (5) =&amp;gt; 32 unique machines within a datacenter&lt;/div&gt;&lt;div&gt;&amp;nbsp; - n bits for sequence 12&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;settle on a epoch = todays date = t&amp;nbsp;&lt;/div&gt;&lt;div&gt;milli seconds post t&amp;nbsp;&lt;/div&gt;&lt;div&gt;add t to it and then convert it to UTC&lt;/div&gt;" style="text;spacingTop=-5;whiteSpace=wrap;html=1;align=left;fontSize=12;fontFamily=Helvetica;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="490" y="580" width="560" height="290" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-17" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;entryX=0.191;entryY=-0.003;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ojcmlVFGGLW4lHHyD_7X-4" target="ojcmlVFGGLW4lHHyD_7X-16">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="620" as="sourcePoint" />
            <mxPoint x="750" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-18" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="1">
          <mxGeometry x="232" y="260" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-19" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="1">
          <mxGeometry x="232" y="320" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-20" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="1">
          <mxGeometry x="232" y="380" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-21" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/generic_server.svg;" vertex="1" parent="1">
          <mxGeometry x="232" y="450" width="28.000000000000004" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-24" value="" style="endArrow=classic;html=1;rounded=0;entryX=-0.015;entryY=0.215;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ojcmlVFGGLW4lHHyD_7X-18" target="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="270" y="355" as="sourcePoint" />
            <mxPoint x="429" y="387" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-25" value="" style="endArrow=classic;html=1;rounded=0;entryX=-0.01;entryY=0.59;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ojcmlVFGGLW4lHHyD_7X-20" target="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="365" as="sourcePoint" />
            <mxPoint x="439" y="397" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-26" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.005;entryY=0.805;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ojcmlVFGGLW4lHHyD_7X-21" target="ojcmlVFGGLW4lHHyD_7X-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="290" y="375" as="sourcePoint" />
            <mxPoint x="449" y="407" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-33" value="" style="sketch=0;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#505050;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;outlineConnect=0;align=center;shape=mxgraph.office.concepts.input_output_filter;" vertex="1" parent="1">
          <mxGeometry x="750" y="340" width="43" height="46" as="geometry" />
        </mxCell>
        <mxCell id="ojcmlVFGGLW4lHHyD_7X-34" value="Bloom filter" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="690" y="290" width="130" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
